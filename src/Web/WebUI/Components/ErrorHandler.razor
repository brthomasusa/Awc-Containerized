@inject IDialogService DialogService
@inject ILogger<ErrorHandler> Logger

<CascadingValue Value="this" IsFixed="true">
	@ChildContent
</CascadingValue>

@code {	
	[Parameter] public RenderFragment? ChildContent { get; set; }

	private async Task ShowErrorMessageAsync(string message)
	{
        var dialog = await DialogService!.ShowErrorAsync(message);
        await dialog.Result;
	}

	public async Task HandleExceptionAsync(Exception ex)
	{
		Logger.LogError(ex, ex.Message);
        
		switch (ex)
		{
			// TODO: Handle more specific exception
			case HttpRequestException _:
				await ShowErrorMessageAsync("Failed to connect to the server.");
				break;               
			default:
				await ShowErrorMessageAsync("Something went wrong!");
				break;
		}
	}
}
